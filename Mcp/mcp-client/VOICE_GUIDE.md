# QT应用语音控制指南

🎤 **基于阿里云语音识别的智能QT应用控制系统**

## ⚡ 快速开始

```bash
# 1. 安装语音依赖
pip install sounddevice numpy

# 2. 配置API密钥（已在config.env中设置）
# DASHSCOPE_API_KEY=sk-your-key-here

# 3. 启动语音控制
python main_voice.py
```

## 🎯 运行模式

### **混合模式（推荐）**
```bash
python main_voice.py
```
- ✅ 支持语音输入 + 文字输入
- ✅ 按住V键录音，松开识别
- ✅ 也可以直接输入文字

### **纯语音模式**
```bash
python main_voice.py --voice-only
```
- 🎤 强制启用语音功能
- 🎤 优先使用语音输入

### **纯文字模式**
```bash
python main_voice.py --text-only
# 或者
python main.py
```
- 📝 禁用语音，仅文字输入
- 📝 适合无麦克风环境

### **交互选择模式**
```bash
python main_voice.py --interactive
```
- 🎯 启动时选择运行模式
- 🎯 根据环境灵活切换

## 🎤 语音操作指南

### **录音操作**
1. **开始录音**：按住 `V键`
2. **录音进度**：实时显示录音时长和波形
3. **结束录音**：松开 `V键`
4. **取消录音**：按 `ESC键`

### **语音识别流程**
```
按住V键 → 录音中... → 松开V键 → 语音识别 → 显示结果 → 确认执行
```

### **确认选项**
- `y` 或 `回车`：确认执行
- `n`：手动输入文字
- `r`：重新录音
- `s`：跳过此次输入

## 📝 支持的语音指令

### **登录操作**
```
🎤 "登录账号wyx，密码124"
🎤 "账号是wyx，密码是124，登录"
🎤 "用wyx这个账号登录，密码124"
```
→ 自动识别并执行登录

### **按钮操作**
```
🎤 "点击测试按钮"
🎤 "测试按钮"
🎤 "按一下测试"
🎤 "测试一下"
```
→ 执行按钮点击操作

### **状态查询**
```
🎤 "查看应用状态"
🎤 "当前状态"
🎤 "看看状态"
🎤 "应用怎么样"
```
→ 获取应用当前状态

### **退出指令**
```
🎤 "退出"
🎤 "结束"
🎤 "quit"
```
→ 退出程序

## ⚙️ 配置说明

### **config.env 语音配置**
```bash
# 启用/禁用语音功能
VOICE_ENABLED=true

# 语音识别模型
VOICE_MODEL=qwen-omni-turbo-0119

# 音频参数
VOICE_SAMPLE_RATE=16000
MAX_RECORDING_DURATION=30

# 交互设置
AUTO_CONFIRM_VOICE=false  # 是否自动确认识别结果
```

### **高级配置**
- `VOICE_SAMPLE_RATE`: 音频采样率，16000Hz适合语音
- `MAX_RECORDING_DURATION`: 最大录音时长（秒）
- `AUTO_CONFIRM_VOICE=true`: 跳过确认环节，直接执行

## 🎯 使用技巧

### **语音录制技巧**
- 🔇 **安静环境**：减少背景噪音
- 🎤 **清晰发音**：正常语速，清楚发音
- ⏰ **适当时长**：建议1-10秒，简洁明了
- 📱 **靠近麦克风**：保证音量适中

### **语音指令技巧**
- 📜 **自然表达**：可以用口语化表达
- 🎯 **关键信息**：重点突出账号、密码等关键词
- 🔄 **重复纠错**：识别错误可以重录
- 💬 **混合使用**：语音+文字结合效率更高

## 🔧 故障排除

### **语音录制问题**
```
❌ sounddevice未安装
```
**解决**: `pip install sounddevice numpy`

```
❌ 没有检测到麦克风
```
**解决**: 检查麦克风设备和权限

```
❌ 录音时间太短
```
**解决**: 至少录音0.5秒以上

### **语音识别问题**
```
❌ 未设置DASHSCOPE_API_KEY
```
**解决**: 在config.env中设置正确的API密钥

```
❌ 语音识别失败
```
**解决**: 
- 检查网络连接
- 确认API密钥有效
- 尝试重新录音

```
❌ 识别结果不准确
```
**解决**:
- 在安静环境录音
- 清晰发音，正常语速
- 使用"重录"功能
- 改用文字输入

### **功能降级**
- 🔇 **无麦克风**: 自动切换文字模式
- 🌐 **网络问题**: 暂时使用文字输入
- 🔧 **依赖缺失**: 提供安装指南

## 💡 最佳实践

### **推荐工作流程**
1. **启动混合模式**: `python main_voice.py`
2. **简单指令用语音**: 如"查看状态"、"测试按钮"
3. **复杂内容用文字**: 如长密码、特殊字符
4. **错误时重录**: 不满意结果时选择重录
5. **效率优先**: 根据情况灵活切换输入方式

### **环境建议**
- 🎧 **使用耳机**: 避免音频反馈
- 🔇 **安静空间**: 减少环境噪音干扰
- 🎤 **优质麦克风**: 提高识别准确率
- 💻 **稳定网络**: 保证API调用成功

### **安全注意**
- 🔐 **敏感信息**: 重要密码建议手动输入
- 📝 **备份方式**: 始终保留文字输入选项
- 🔍 **确认结果**: 重要操作前确认识别结果

## 🚀 高级用法

### **批量操作**
```bash
# 连续语音指令
🎤 "登录账号wyx密码124" → 执行登录
🎤 "点击测试按钮" → 执行测试  
🎤 "查看状态" → 查询状态
```

### **自动化配置**
```bash
# 设置自动确认，提高效率
AUTO_CONFIRM_VOICE=true
```

### **调试模式**
```bash
# 查看详细日志
LOG_LEVEL=DEBUG python main_voice.py
```

---

🎉 **开始您的语音控制体验吧！**

有问题请查看 [README.md](README.md) 或 [QUICK_TEST.md](QUICK_TEST.md) 